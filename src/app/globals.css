@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import Z-Index Hierarchy */
@import '../styles/z-index.css';

@layer base {
  :root {
    --primary-green: #10B981;
    --secondary-green: #059669;
    --text-dark: #1F2937;
    --text-light: #6B7280;
    --bg-white: #FFFFFF;
    --bg-light: #F9FAFB;
  }

  .dark {
    --primary-green: #10B981;
    --secondary-green: #059669;
    --text-dark: #F9FAFB;
    --text-light: #D1D5DB;
    --bg-white: #1F2937;
    --bg-light: #111827;
  }

  * {
    @apply box-border m-0 p-0;
  }

  html {
    @apply scroll-smooth;
  }

  body {
    font-family: 'Poppins', sans-serif;
    @apply leading-relaxed text-gray-900 bg-gray-50 transition-all duration-300;
  }

  .dark body {
    @apply text-gray-100 bg-gray-900;
  }

  /* Expert Animated Gradient Background */
  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -2;
    background: linear-gradient(
      45deg, 
      #f8fafc 0%, 
      #e0e7ff 25%, 
      #ecfdf5 50%, 
      #f0f9ff 75%, 
      #f8fafc 100%
    );
    background-size: 400% 400%;
    animation: gradient-bg 20s ease infinite;
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .dark body::before {
    background: linear-gradient(
      45deg, 
      #0f172a 0%, 
      #1e293b 25%, 
      #064e3b 50%, 
      #0c4a6e 75%, 
      #0f172a 100%
    );
    background-size: 400% 400%;
    animation: gradient-bg 20s ease infinite;
  }

  /* Theme transition effect */
  body {
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  .dark body {
    transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  /* Enhanced theme transition overlay */
  .theme-transition {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 9999;
    background: radial-gradient(circle at center, transparent 0%, rgba(16, 185, 129, 0.1) 100%);
    opacity: 0;
    transition: opacity 0.8s ease;
  }

  .theme-transition.active {
    opacity: 1;
  }

  /* Enhanced smooth theme transition overlay */
  .theme-transition-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    pointer-events: none;
    z-index: 999999;
    background: radial-gradient(
      circle at center,
      rgba(16, 185, 129, 0.15) 0%,
      rgba(59, 130, 246, 0.1) 50%,
      transparent 100%
    );
    opacity: 0;
    transition: opacity 0.6s cubic-bezier(0.4, 0, 0.2, 1);
    mix-blend-mode: overlay;
  }

  .theme-transition-overlay.active {
    opacity: 1;
  }

  /* Smooth transitions for all elements */
  * {
    transition-property: background-color, border-color, color, fill, stroke;
    transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
    transition-duration: 300ms;
  }

  /* Immersive Theme Transition */
  #theme-transition-overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
    z-index: 99998;
    pointer-events: none;
    clip-path: circle(0% at 0px 0px);
    transition: clip-path 0.8s cubic-bezier(0.4, 0, 0.2, 1);
  }

  #theme-transition-overlay.dark {
    background-color: #111827; /* dark:bg-gray-900 */
  }

  #theme-transition-overlay.light {
    background-color: #F9FAFB; /* bg-gray-50 */
  }
}

@layer utilities {
  /* Animations */
  @keyframes gradient-bg {
    0%, 100% {
      background-position: 0% 50%;
    }
    50% {
      background-position: 100% 50%;
    }
  }

  @keyframes ripple {
    to {
      transform: scale(4);
      opacity: 0;
    }
  }

  @keyframes rotate {
    0% {
      transform: rotate(0deg) scale(1);
    }
    50% {
      transform: rotate(180deg) scale(1.1);
    }
    100% {
      transform: rotate(360deg) scale(1);
    }
  }

  .animate-gradient-bg {
    animation: gradient-bg 20s ease infinite;
  }

  .animate-ripple {
    animation: ripple 0.6s ease-out;
  }

  .animate-rotate {
    animation: rotate 10s linear infinite;
  }
}

@layer components {
  /* Custom Scrollbar */
  ::-webkit-scrollbar { @apply w-2; }
  ::-webkit-scrollbar-track { @apply bg-transparent; }
  ::-webkit-scrollbar-thumb { @apply bg-primary-green/50 rounded; }
  ::-webkit-scrollbar-thumb:hover { @apply bg-primary-green; }
  
  /* Section Backgrounds - Simplified */
  section {
    @apply relative;
  }

  section:nth-child(odd) {
    @apply bg-gray-50 dark:bg-gray-900;
  }

  section:nth-child(even) {
    @apply bg-white dark:bg-gray-800;
  }

  /* Override for specific sections that need transparent background
  section#services {
    background: transparent !important;
  }

  section#services::before {
    display: none !important;
  } */

  /* Animated background for odd sections */
section::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      45deg,
      hsla(206, 100%, 97%, 0.4),
      hsla(221, 100%, 96%, 0.4),
      hsla(158, 93%, 97%, 0.4),
      hsla(204, 100%, 97%, 0.4),
      hsla(206, 100%, 97%, 0.4)
    );
    background-size: 400% 400%;
    animation: gradient-bg 20s ease infinite;
    z-index: -1;
    opacity: 0.6;
    filter: blur(15px);
    pointer-events: none;
  }

  /* * UBAH ATURAN DI BAWAH INI:
   * Hapus ':nth-child(odd)' agar berlaku untuk SEMUA section (mode gelap).
   */
  .dark section::before {
    background: linear-gradient(
      45deg,
      hsla(222, 47%, 11%, 0.6),
      hsla(222, 39%, 16%, 0.6),
      hsla(167, 88%, 13%, 0.6),
      hsla(206, 76%, 17%, 0.6),
      hsla(222, 47%, 11%, 0.6)
    );
    background-size: 400% 400%;
    animation: gradient-bg 20s ease infinite;
    opacity: 0.7;
    filter: blur(20px);
  }

  .dark section:nth-child(odd)::before {
    background: linear-gradient(
      45deg,
      hsla(222, 47%, 11%, 0.6),
      hsla(222, 39%, 16%, 0.6),
      hsla(167, 88%, 13%, 0.6),
      hsla(206, 76%, 17%, 0.6),
      hsla(222, 47%, 11%, 0.6)
    );
    background-size: 400% 400%;
    animation: gradient-bg 20s ease infinite;
    opacity: 0.7;
    filter: blur(20px);
  }

  /* Buttons */
  .btn-primary-custom {
    @apply bg-gradient-to-r from-emerald-500 to-emerald-600 text-white border-none py-4 px-8 rounded-full font-semibold uppercase tracking-wider transition-all duration-300 relative overflow-hidden;
  }
  .btn-primary-custom:hover {
    @apply -translate-y-1 shadow-xl;
  }

  .btn-outline-custom {
    @apply border-2 border-emerald-500 text-emerald-500 py-4 px-8 rounded-full font-semibold uppercase tracking-wider bg-transparent transition-all duration-300;
  }
  .btn-outline-custom:hover {
    @apply bg-emerald-500 text-white -translate-y-1;
  }

  /* Social Icons */
  .social-icon {
    @apply inline-flex items-center justify-center w-12 h-12 bg-white dark:bg-gray-800 text-emerald-500 rounded-full mx-2 text-xl shadow-lg transition-all duration-300 no-underline;
  }
  .social-icon:hover {
    @apply bg-emerald-500 text-white -translate-y-1;
    transform: translateY(-4px) rotate(360deg);
  }

  /* Ripple Effect */
  .ripple {
    @apply absolute rounded-full bg-white/60 scale-0 animate-ripple pointer-events-none;
  }

  /* Profile decoration circles */
  .profile-decoration {
    @apply absolute w-24 h-24 border-2 border-emerald-500 rounded-full opacity-30 animate-rotate;
  }
  .profile-decoration:nth-child(2) {
    @apply -top-5 -right-5;
    animation-delay: -2s;
  }
  .profile-decoration:nth-child(3) {
    @apply -bottom-5 -left-5;
    animation-delay: -4s;
  }
}

/*
 * Modal Styling Fix
 * --------------------------------------------------
 */
.modal-backdrop {
  position: fixed; /* <-- This is the key fix: position relative to the viewport */
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000; /* Ensure it's on top of all other content */
}

.modal-backdrop-overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-color: rgba(0, 0, 0, 0.6); /* Semi-transparent black backdrop */
}

.modal-content {
  position: relative; /* Positioned within the backdrop */
  background: white; /* Default modal background color */
  padding: 0; /* Let internal padding handle spacing */
  border-radius: 0.5rem; /* 8px border radius */
  width: 91.666667%; /* w-11/12 equivalent */
  max-height: 90vh; /* max-h-[90vh] equivalent */
  overflow-y: auto; /* Allow scrolling within the modal if content is long */
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25); /* shadow-xl equivalent */
  transition: all 300ms; /* transition-all duration-300 equivalent */
}

/* Dark mode support */
.dark .modal-content {
  background: rgb(31, 41, 55); /* dark:bg-gray-800 equivalent */
}